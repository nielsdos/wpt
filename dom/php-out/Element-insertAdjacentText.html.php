<?php define('undefined', 'undefined');require __DIR__.'/../driver.inc.php';
$html = file_get_contents(__DIR__."/../nodes/Element-insertAdjacentText.html");
$document = @DOM\HTMLDocument::createFromString($html);
;
$target = $document->getElementById("target");
$target2 = $document->getElementById("target2");
;
// Not possible because it's an enum
/*test(function() {global $document;
  assert_throws_dom("SYNTAX_ERR", function() {global $document;global $target;
    $target->insertAdjacentText("test", "text");
  });
;
  assert_throws_dom("SYNTAX_ERR", function() {global $document;global $target2;
    $target2->insertAdjacentText("test", "test");
  });
}, "Inserting to an invalid location should cause a Syntax Error exception");*/
;
test(function() {global $document;global $target;global $target2;
  $target->insertAdjacentText(Dom\AdjacentPosition::BeforeBegin, "test1");
  assert_equals($target->previousSibling->nodeValue, "test1");
;
  $target2->insertAdjacentText(Dom\AdjacentPosition::BeforeBegin, "test1");
  assert_equals($target2->previousSibling->nodeValue, "test1");
}, "Inserted text node should be target element's previous sibling for 'beforebegin' case");
;
test(function() {global $document;global $target;global $target2;
  $target->insertAdjacentText(Dom\AdjacentPosition::AfterBegin, "test2");
  assert_equals($target->firstChild->nodeValue, "test2");
;
  $target2->insertAdjacentText(Dom\AdjacentPosition::AfterBegin, "test2");
  assert_equals($target2->firstChild->nodeValue, "test2");
}, "Inserted text node should be target element's first child for 'afterbegin' case");
;
test(function() {global $document;global $target;global $target2;
  $target->insertAdjacentText(Dom\AdjacentPosition::BeforeEnd, "test3");
  assert_equals($target->lastChild->nodeValue, "test3");
;
  $target2->insertAdjacentText(Dom\AdjacentPosition::BeforeEnd, "test3");
  assert_equals($target2->lastChild->nodeValue, "test3");
}, "Inserted text node should be target element's last child for 'beforeend' case");
;
test(function() {global $document;global $target;global $target2;
  $target->insertAdjacentText(Dom\AdjacentPosition::AfterEnd, "test4");
  assert_equals($target->nextSibling->nodeValue, "test4");
;
  $target2->insertAdjacentText(Dom\AdjacentPosition::AfterEnd, "test4");
  assert_equals($target->nextSibling->nodeValue, "test4");
}, "Inserted text node should be target element's next sibling for 'afterend' case");
;
test(function() {global $document;
  $docElement = $document->documentElement;
  //$docElement->style->visibility="hidden";
;
  assert_throws_dom("HIERARCHY_REQUEST_ERR", function() use($docElement) {global $document;global $target;
    $docElement->insertAdjacentText(Dom\AdjacentPosition::BeforeBegin, "text1");
  });
;
  $docElement->insertAdjacentText(Dom\AdjacentPosition::AfterBegin, "test2");
  assert_equals($docElement->firstChild->nodeValue, "test2");
;
  $docElement->insertAdjacentText(Dom\AdjacentPosition::BeforeEnd, "test3");
  assert_equals($docElement->lastChild->nodeValue, "test3");
;
  assert_throws_dom("HIERARCHY_REQUEST_ERR", function() use($docElement) {global $document;global $target;
    $docElement->insertAdjacentText(Dom\AdjacentPosition::AfterEnd, "test4");
  });
}, "Adding more than one child to document should cause a HierarchyRequestError exception");
;
;